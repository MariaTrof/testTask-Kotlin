"use strict";

exports.trackRehydrationMiddleware = function (_ref, protocol) {
    var waitForAction = _ref.waitForAction;
    return function (store) {
        return function (next) {
            if (!waitForAction) {
                protocol.setRehydrationCompleted();
                protocol.maybeCheckVersion();
            }
            return function (action) {
                if (waitForAction && action.type === waitForAction) {
                    protocol.setRehydrationCompleted();
                    protocol.maybeCheckVersion();
                }
                return next(action);
            };
        };
    };
};